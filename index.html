<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏗️ 개별직종 노임단가 정보</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .search-section {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            border: 1px solid #404040;
        }
        
        .search-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 20px;
            align-items: end;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 500;
            margin-bottom: 8px;
            color: #b0b0b0;
        }
        
        .form-input, .form-select {
            padding: 12px 16px;
            border: 2px solid #404040;
            border-radius: 8px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            margin-left: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .results-section {
            background: #2d2d2d;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 1px solid #404040;
        }
        
        .results-header {
            padding: 25px 30px;
            background: linear-gradient(135deg, #3d3d3d 0%, #4a4a4a 100%);
            border-bottom: 1px solid #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .export-buttons {
            display: flex;
            gap: 10px;
        }
        
        .export-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .csv-btn {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
        }
        
        .txt-btn {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 16px 20px;
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 1px solid #555;
        }
        
        th:hover {
            background: #5a6fd8;
        }
        
        td {
            padding: 16px 20px;
            border-bottom: 1px solid #404040;
            background: #2d2d2d;
        }
        
        tr:hover td {
            background-color: #3d3d3d;
        }
        
        tr:nth-child(even) td {
            background-color: #252525;
        }
        
        tr:nth-child(even):hover td {
            background-color: #353535;
        }
        
        .wage {
            font-weight: 600;
            color: #28a745;
            text-align: right;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .increase {
            color: #28a745 !important;
        }
        
        .decrease {
            color: #dc3545 !important;
        }
        
        .no-change {
            color: #6c757d !important;
        }
        
        @media (max-width: 1200px) {
            .table-wrapper {
                overflow-x: auto;
            }
            
            th, td {
                min-width: 100px;
                white-space: nowrap;
            }
        }
        
        @media (max-width: 768px) {
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .results-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            th, td {
                padding: 12px 8px;
                font-size: 0.85rem;
            }
            
            .wage {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🏗️ 개별직종 노임단가 정보</h1>
        <p>국가통계포털(KOSIS) 데이터 기반</p>
        
        <div style="margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; max-width: 800px; margin-left: auto; margin-right: auto;">
            <h3 style="margin-bottom: 15px; color: #ffffff;">📋 건설노임단가 검색기</h3>
            <p style="margin-bottom: 10px; line-height: 1.6; opacity: 0.9;">
                건설업체, 시공업체, 공사 관계자를 위한 <strong>실시간 노임단가 조회 서비스</strong>입니다. 
                국가통계포털에서 제공하는 공식 데이터를 기반으로 전문 직종의 단가 정보를 제공합니다.
            </p>
            <p style="margin-bottom: 10px; line-height: 1.6; opacity: 0.9;">
                <strong>✓ 연도별 단가 비교</strong> | <strong>✓ 증감률 분석</strong> | <strong>✓ 직종별 검색</strong> | <strong>✓ 데이터 내보내기</strong>
            </p>
            <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">
                <strong>📊 데이터 출처:</strong> 국가통계포털(KOSIS) - 개별직종 노임단가 통계 | 
                <strong>🔄 업데이트:</strong> 반기별 (상반기/하반기) | 
                <strong>📈 기준:</strong> 전국 평균 단가
            </p>
        </div>
    </div>
    
    <div class="container">
        <div class="search-section">
            <h2>🔍 노임단가 검색</h2>
            <div class="search-form">
                <div class="form-group">
                    <label for="job">직종</label>
                    <input type="text" id="job" class="form-input" placeholder="예: 건축목공, 용접공">
                </div>
                <div class="form-group">
                    <label for="year">기준년도</label>
                    <select id="year" class="form-select">
                        <option value="전체">전체 기간</option>
                        <option value="2025">2025년</option>
                        <option value="2024">2024년</option>
                        <option value="2023">2023년</option>
                        <option value="2022">2022년</option>
                        <option value="2021">2021년</option>
                        <option value="2020">2020년</option>
                        <option value="2019">2019년</option>
                        <option value="2018">2018년</option>
                        <option value="2017">2017년</option>
                        <option value="2016">2016년</option>
                        <option value="2015">2015년</option>
                    </select>
                </div>
                <div>
                    <button class="btn btn-primary" onclick="searchWages()">검색하기</button>
                    <button class="btn btn-success" onclick="showAll()">전체보기</button>
                </div>
            </div>
        </div>
        
        <div class="results-section">
            <div class="results-header">
                <div>
                    <h3>📊 노임단가 검색 결과</h3>
                    <p id="result-count">총 0건의 결과</p>
                </div>
                <div class="export-buttons">
                    <button class="export-btn csv-btn" onclick="exportCSV()">📊 CSV 저장</button>
                    <button class="export-btn txt-btn" onclick="exportTXT()">📄 TXT 저장</button>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">직종</th>
                            <th onclick="sortTable(1)">지역</th>
                            <th onclick="sortTable(2)">2025년 하반기</th>
                            <th onclick="sortTable(3)">2025년 상반기</th>
                            <th onclick="sortTable(4)">2024년 하반기</th>
                            <th onclick="sortTable(5)">2023년 하반기</th>
                            <th onclick="sortTable(6)">2022년 하반기</th>
                            <th onclick="sortTable(7)">증감률</th>
                        </tr>
                    </thead>
                    <tbody id="results-body">
                        <tr>
                            <td colspan="8" class="loading">데이터를 불러오는 중...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        // 노임단가 데이터 (직종별로 연도별 데이터를 객체로 구성)
        const wageData = [
            {
                직종: '작업반장',
                지역: '전국',
                '2025_2': 214661, '2025_1': 213033, '2024_2': 210000, '2023_2': 206000, '2022_2': 202000
            },
            {
                직종: '보통인부',
                지역: '전국',
                '2025_2': 171037, '2025_1': 169804, '2024_2': 167000, '2023_2': 164000, '2022_2': 161000
            },
            {
                직종: '특별인부',
                지역: '전국',
                '2025_2': 224490, '2025_1': 221506, '2024_2': 218000, '2023_2': 214000, '2022_2': 210000
            },
            {
                직종: '조력공',
                지역: '전국',
                '2025_2': 179958, '2025_1': 180331, '2024_2': 177000, '2023_2': 174000, '2022_2': 171000
            },
            {
                직종: '제도사',
                지역: '전국',
                '2025_2': 239200, '2025_1': 232099, '2024_2': 228000, '2023_2': 224000, '2022_2': 220000
            },
            {
                직종: '비계공',
                지역: '전국',
                '2025_2': 279613, '2025_1': 279433, '2024_2': 275000, '2023_2': 270000, '2022_2': 265000
            },
            {
                직종: '형틀목공',
                지역: '전국',
                '2025_2': 273074, '2025_1': 272831, '2024_2': 268000, '2023_2': 263000, '2022_2': 258000
            },
            {
                직종: '철근공',
                지역: '전국',
                '2025_2': 265818, '2025_1': 264104, '2024_2': 260000, '2023_2': 255000, '2022_2': 250000
            },
            {
                직종: '철공',
                지역: '전국',
                '2025_2': 237686, '2025_1': 237754, '2024_2': 234000, '2023_2': 230000, '2022_2': 226000
            },
            {
                직종: '철판공',
                지역: '전국',
                '2025_2': 219862, '2025_1': 219236, '2024_2': 216000, '2023_2': 212000, '2022_2': 208000
            },
            {
                직종: '철골공',
                지역: '전국',
                '2025_2': 251511, '2025_1': 250239, '2024_2': 246000, '2023_2': 241000, '2022_2': 236000
            },
            {
                직종: '용접공',
                지역: '전국',
                '2025_2': 280178, '2025_1': 278326, '2024_2': 274000, '2023_2': 269000, '2022_2': 264000
            },
            {
                직종: '콘크리트공',
                지역: '전국',
                '2025_2': 271064, '2025_1': 266361, '2024_2': 262000, '2023_2': 257000, '2022_2': 252000
            },
            {
                직종: '건축목공',
                지역: '전국',
                '2025_2': 283068, '2025_1': 277894, '2024_2': 273000, '2023_2': 268000, '2022_2': 263000
            },
            {
                직종: '미장공',
                지역: '전국',
                '2025_2': 278998, '2025_1': 272354, '2024_2': 268000, '2023_2': 263000, '2022_2': 258000
            },
            {
                직종: '타일공',
                지역: '전국',
                '2025_2': 286589, '2025_1': 284337, '2024_2': 280000, '2023_2': 275000, '2022_2': 270000
            },
            {
                직종: '도장공',
                지역: '전국',
                '2025_2': 258362, '2025_1': 253409, '2024_2': 249000, '2023_2': 244000, '2022_2': 239000
            },
            {
                직종: '배관공',
                지역: '전국',
                '2025_2': 239439, '2025_1': 238145, '2024_2': 234000, '2023_2': 229000, '2022_2': 224000
            },
            {
                직종: '내선전공',
                지역: '전국',
                '2025_2': 273539, '2025_1': 268915, '2024_2': 264000, '2023_2': 259000, '2022_2': 254000
            },
            {
                직종: '플랜트배관공',
                지역: '전국',
                '2025_2': 324800, '2025_1': 324130, '2024_2': 318000, '2023_2': 312000, '2022_2': 306000
            },
            {
                직종: '플랜트용접공',
                지역: '전국',
                '2025_2': 301090, '2025_1': 299776, '2024_2': 295000, '2023_2': 290000, '2022_2': 285000
            },
            {
                직종: '특고압케이블전공',
                지역: '전국',
                '2025_2': 439248, '2025_1': 436458, '2024_2': 430000, '2023_2': 423000, '2022_2': 416000
            },
            {
                직종: '송전전공',
                지역: '전국',
                '2025_2': 637453, '2025_1': 627960, '2024_2': 620000, '2023_2': 610000, '2022_2': 600000
            },
            {
                직종: '송전활선전공',
                지역: '전국',
                '2025_2': 673714, '2025_1': 662709, '2024_2': 650000, '2023_2': 640000, '2022_2': 630000
            }
        ];
        
        let currentData = [];
        
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ko-KR', {
                style: 'currency',
                currency: 'KRW',
                minimumFractionDigits: 0
            }).format(amount);
        }
        
        function searchWages() {
            const job = document.getElementById('job').value.toLowerCase();
            const year = document.getElementById('year').value;
            
            let filtered = wageData;
            
            if (job) {
                filtered = filtered.filter(item => 
                    item.직종.toLowerCase().includes(job)
                );
            }
            
            displayResults(filtered);
        }
        
        function showAll() {
            displayResults(wageData);
        }
        
        function displayResults(data) {
            currentData = data;
            const tbody = document.getElementById('results-body');
            const countElement = document.getElementById('result-count');
            
            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" class="loading">검색 결과가 없습니다.</td></tr>';
                countElement.textContent = '총 0건의 결과';
                return;
            }
            
            tbody.innerHTML = data.map(item => {
                const wage2025_2 = item['2025_2'] || 0;
                const wage2025_1 = item['2025_1'] || 0;
                const wage2024_2 = item['2024_2'] || 0;
                const wage2023_2 = item['2023_2'] || 0;
                const wage2022_2 = item['2022_2'] || 0;
                
                // 증감률 계산 (2022년 대비 2025년 하반기)
                const changeRate = wage2022_2 > 0 ? ((wage2025_2 - wage2022_2) / wage2022_2 * 100).toFixed(1) : 0;
                const changeColor = changeRate > 0 ? '#28a745' : changeRate < 0 ? '#dc3545' : '#6c757d';
                
                return `
                    <tr>
                        <td style="font-weight: 600;">
                            <span style="color: #888; font-size: 0.8em;">${item.코드 || ''}</span>
                            ${item.코드 ? '<br>' : ''}${item.직종}
                        </td>
                        <td>${item.지역}</td>
                        <td class="wage" style="color: #4CAF50;">${wage2025_2 > 0 ? formatCurrency(wage2025_2) : '-'}</td>
                        <td class="wage" style="color: #66BB6A;">${wage2025_1 > 0 ? formatCurrency(wage2025_1) : '-'}</td>
                        <td class="wage" style="color: #81C784;">${wage2024_2 > 0 ? formatCurrency(wage2024_2) : '-'}</td>
                        <td class="wage" style="color: #A5D6A7;">${wage2023_2 > 0 ? formatCurrency(wage2023_2) : '-'}</td>
                        <td class="wage" style="color: #C8E6C9;">${wage2022_2 > 0 ? formatCurrency(wage2022_2) : '-'}</td>
                        <td style="color: ${changeColor}; font-weight: 600; text-align: center;">
                            ${changeRate > 0 ? '+' : ''}${changeRate}%
                        </td>
                    </tr>
                `;
            }).join('');
            
            countElement.textContent = `총 ${data.length}건의 결과`;
        }
        
        function sortTable(column) {
            const keys = ['직종', '지역', '2025_2', '2025_1', '2024_2', '2023_2', '2022_2', 'change'];
            const key = keys[column];
            
            currentData.sort((a, b) => {
                if (key === 'change') {
                    const aChange = a['2022_2'] > 0 ? ((a['2025_2'] - a['2022_2']) / a['2022_2'] * 100) : 0;
                    const bChange = b['2022_2'] > 0 ? ((b['2025_2'] - b['2022_2']) / b['2022_2'] * 100) : 0;
                    return bChange - aChange;
                } else if (typeof a[key] === 'number') {
                    return (b[key] || 0) - (a[key] || 0);
                }
                return a[key].localeCompare(b[key], 'ko');
            });
            
            displayResults(currentData);
        }
        
        function exportCSV() {
            const header = '직종,지역,2025년하반기,2025년상반기,2024년하반기,2023년하반기,2022년하반기,증감률\\n';
            const content = currentData.map(item => {
                const changeRate = item['2022_2'] > 0 ? ((item['2025_2'] - item['2022_2']) / item['2022_2'] * 100).toFixed(1) : 0;
                return `"${item.직종}","${item.지역}",${item['2025_2'] || 0},${item['2025_1'] || 0},${item['2024_2'] || 0},${item['2023_2'] || 0},${item['2022_2'] || 0},"${changeRate}%"`;
            }).join('\\n');
            
            const csvContent = header + content;
            downloadFile(csvContent, 'text/csv', '노임단가_연도별비교.csv');
        }
        
        function exportTXT() {
            const header = '직종\\t지역\\t2025년하반기\\t2025년상반기\\t2024년하반기\\t2023년하반기\\t2022년하반기\\t증감률\\n';
            const content = currentData.map(item => {
                const changeRate = item['2022_2'] > 0 ? ((item['2025_2'] - item['2022_2']) / item['2022_2'] * 100).toFixed(1) : 0;
                return `${item.직종}\\t${item.지역}\\t${item['2025_2'] || 0}\\t${item['2025_1'] || 0}\\t${item['2024_2'] || 0}\\t${item['2023_2'] || 0}\\t${item['2022_2'] || 0}\\t${changeRate}%`;
            }).join('\\n');
            
            const txtContent = header + content;
            downloadFile(txtContent, 'text/plain', '노임단가_연도별비교.txt');
        }
        
        function downloadFile(content, type, filename) {
            const blob = new Blob([content], { type: type + ';charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }
        
        // 페이지 로드 시 전체 데이터 표시
        window.onload = function() {
            showAll();
        };
    </script>
</body>
</html>
